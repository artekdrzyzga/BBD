<!DOCTYPE HTML>
<html>
	<head>
		<title>By British Design</title>
		<meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

		  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>  





<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* {box-sizing: border-box;}

.img-magnifier-container {
  position:relative;
}

.img-magnifier-glass {
  position: absolute;
  border: 0px solid #000;
  border-radius: 50%;
  cursor: none;
  /*Set the size of the magnifier glass:*/
  width: 200px;
  height: 200px;
}
</style>

<script>
function magnify(imgID, zoom) {
  var img, glass, w, h, bw;
  img = document.getElementById(imgID);
  /*create magnifier glass:*/
  glass = document.createElement("DIV");
  glass.setAttribute("class", "img-magnifier-glass");
  /*insert magnifier glass:*/
  img.parentElement.insertBefore(glass, img);
  /*set background properties for the magnifier glass:*/
  glass.style.backgroundImage = "url('" + img.src + "')";
  glass.style.backgroundRepeat = "no-repeat";
  glass.style.backgroundSize = (img.width * zoom) + "px " + (img.height * zoom) + "px";
  bw = 3;
  w = glass.offsetWidth / 2;
  h = glass.offsetHeight / 2;
  /*execute a function when someone moves the magnifier glass over the image:*/
  glass.addEventListener("mousemove", moveMagnifier);
  img.addEventListener("mousemove", moveMagnifier);
  /*and also for touch screens:*/
  glass.addEventListener("touchmove", moveMagnifier);
  img.addEventListener("touchmove", moveMagnifier);
  function moveMagnifier(e) {
    var pos, x, y;
    /*prevent any other actions that may occur when moving over the image*/
    e.preventDefault();
    /*get the cursor's x and y positions:*/
    pos = getCursorPos(e);
    x = pos.x;
    y = pos.y;
    /*prevent the magnifier glass from being positioned outside the image:*/
    if (x > img.width - (w / zoom)) {x = img.width - (w / zoom);}
    if (x < w / zoom) {x = w / zoom;}
    if (y > img.height - (h / zoom)) {y = img.height - (h / zoom);}
    if (y < h / zoom) {y = h / zoom;}
    /*set the position of the magnifier glass:*/
    glass.style.left = (x - w) + "px";
    glass.style.top = (y - h) + "px";
    /*display what the magnifier glass "sees":*/
    glass.style.backgroundPosition = "-" + ((x * zoom) - w + bw) + "px -" + ((y * zoom) - h + bw) + "px";
  }
  function getCursorPos(e) {
    var a, x = 0, y = 0;
    e = e || window.event;
    /*get the x and y positions of the image:*/
    a = img.getBoundingClientRect();
    /*calculate the cursor's x and y coordinates, relative to the image:*/
    x = e.pageX - a.left;
    y = e.pageY - a.top;
    /*consider any page scrolling:*/
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    return {x : x, y : y};
  }
}
</script>
</head>

	<body class="is-preload">

			
		<!-- Wrapper -->
			<div id="wrapper">
				<!-- Main -->
					<div id="main">
						<div class="inner">
							<!-- Header -->
								<header id="header">
                                     <% if current_user %>
                                       <span><%= current_user.email %></span>
                                        <%= link_to  sign_out_path, method: :delete  do %>Log Out
                                           <span class="fa fa-sign-out-alt"></span>
                                        <% end %>
                                     <% else %>
                                       <%= link_to  sign_in_path  do %>Log In
                                           <span class="fa fa-sign-in-alt"></span>
                                       <% end %>    <!--    <i class="fab fa-instagram"></i>-->
                                     <% end %>
									<ul class="icons">
										<div data-turbolinks="false">
											<li><%= link_to "", root_path, class: 'icon solid fa-home'%></li> 
											<!--  <li><a href="https://bbd-shop.herokuapp.com/" data-turbolinks="false" class="icon solid fa-home"><span class="label">Twitter</span></a></li>	-->
											<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
											<li><a href="https://www.facebook.com/By-British-Design-111278024036098" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
											<li><a href="#" class="icon brands fa-snapchat-ghost"><span class="label">Snapchat</span></a></li>
											<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
											<li><a href="#" class="icon brands fa-medium-m"><span class="label">Medium</span></a></li>
										</div>
									</ul>
								
                  <div id="content-placeholder">
                    <%= link_to cart_path, :class => "koszyk", style:'position: fixed; right: 10px; z-index: 9999; color: black; background-color: white; box-shadow:5px 5px 15px #000000; border: 1px solid white; border-radius: 100%; height: 70px; width: 70px; text-align: center', data:{ turbolinks: "false" } do %>
                      <span class="fa fa-shopping-cart" style="margin: 10px; font-size: 80%; padding-top: 10px;">
                        <%= current_cart.line_items.map { |e| e.quantity }.sum %> 
                        <%= number_to_currency(current_cart.line_items.map { |e| e.full_price }.sum) %>
                      </span>
									  <% end %>
                  </div>	

                </header>
                            <!-- Banner -->
                               <% if (controller.controller_name == "products" && controller.action_name != "show") || controller.controller_name == "categories"%>  <!--  && controller.action_name != "show" -->

								  <section id="banner">
									<div class="content">
										<header>
											<h1>By British Design</h1>
										</header>
										<p><%=@setting.desc_top%></p>
										<ul class="actions">
											<li><a href="#" class="button big">Find out More</a></li>
										</ul>
									</div>
									<span class="image object">	
                                         <%= image_tag @setting.picture if @setting.picture.attached? %> 
									</span>
								  </section> 
							   <%else%>
                                     
                               <%end%>
							<!-- YIELD -->
							   <div class="container">
                                       <%= yield %>
                                </div>
							<!-- YIELD -->	
						</div>
					</div>
				<!-- Sidebar -->
					<div id="sidebar">
						<div class="inner">
						<!-- Search -->
								<section id="search" class="alt">
								    <!--
									<form method="post" action="#">
										<input type="text" name="query" id="query" placeholder="Search" />
									</form>
                                    -->	



                                    

									<div class="search-form">
										<%#= search_form_for  @q do |f| %> 
											<div class="col-5"><%#= f.search_field :name_cont, input_html: {value: ""} %></div>
										<%#end%>
                                    </div>


								</section>

						

							<!-- Menu -->    
							 <nav id="menu">
							  <header class="major">
								  <h2>Categories</h2>
								</header>
								<ul> 
                                  <% Category.all.each do |category| %>
                                    <li>
									  <% if category.subcategorys.count != 0 %>
                                        <span class="opener"><%= category.name%></span>
                                        <ul>
                                          <li><%= link_to "All.....#{category.name}", category_path(category), data:{ turbolinks: "false" }%></li>
										  <% Subcategory.all.each do |subcategory| %>
                                            <%if category.id == subcategory.category_id%>
											  <li><%= link_to subcategory.name, subcategory_path(subcategory), data:{ turbolinks: "false" }%></li>	
											<%end%>  
                                          <%end%>  
									    </ul>									
									  <%else%>	 
			                            <%= link_to category.name, category_path(category), data:{ turbolinks: "false" }%>
									  <%end%>
                                    </li>
                                 <% end %>
                                </ul>
							 </nav>
             
							<!-- Section -->
								<section>
									<header class="major">
										<h2>Get in touch</h2>
									</header>
									<p>
                        			  <%=@setting.desc_menu%>									
									</p>
									<ul class="contact">
										<li class="icon solid fa-envelope"><a href="#"><%=@setting.email%></a></li>
										<li class="icon solid fa-phone">07854 111776</li>
										<li class="icon solid fa-home">28a-b Queens Parade, Friern Barnet Road, Friern Barnet,
                                          London, N11 3DA<br/></li>
									</ul>
								</section>

							<!-- Footer -->
								<footer id="footer">
									<p class="copyright">&copy; By The British Design. All rights reserved.</p>
								</footer>
							<!-- Section -->							
						</div>
					</div>
			</div>
		<!-- Scripts -->
	</body>
    <%= stylesheet_link_tag    'scale', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'scale', 'data-turbolinks-track': 'reload' %> 


</html>
